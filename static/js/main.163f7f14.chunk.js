(this.webpackJsonpolive=this.webpackJsonpolive||[]).push([[0],{71:function(e,n,t){},72:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=72},73:function(e,n,t){},78:function(e,n,t){"use strict";t.r(n);var c=t(3),o=t(0),i=t.n(o),a=t(10),r=t.n(a),s=(t(71),t(58)),l=t(116),u=t(47),d=t(16),j=t(51),f=t.n(j),b=t(59),h=Object(o.createContext)({});function p(e){var n=e.children,t=Object(o.useState)(),i=Object(d.a)(t,2),a=i[0],r=i[1],s=Object(o.useState)(),l=Object(d.a)(s,2),u=l[0],j=l[1],p=Object(o.useState)(!1),v=Object(d.a)(p,2),O=v[0],g=v[1];return Object(o.useEffect)((function(){console.log(O)}),[O]),Object(o.useEffect)((function(){if(console.log("peer con set:",u,O),u&&!O){var e=function(){console.log("connected"),g(!0)};return u.on("open",e),console.log("open event set"),function(){u.off("open",e)}}}),[u,O]),Object(o.useEffect)((function(){if(u){var e=function(){console.log("disconnected"),g(!1),j(void 0)},n=function(e){console.log("err",e),g(!1),j(void 0)};return u.on("close",e),u.on("error",n),function(){u.off("close",e),u.off("error",n)}}}),[u]),Object(o.useEffect)((function(){var e=new f.a(Object(b.a)(5),{host:"ciapeer.herokuapp.com",secure:!0}),n=function(n){r(e),console.log(n)},t=function(e){"unavailable-id"===e.type&&window.location.reload()},c=function(e){console.log("getting connection from",e.peer),j(e)};return e.on("open",n),e.on("error",t),e.on("connection",c),function(){e.off("open",n),e.off("error",t),e.off("connection",c)}}),[]),Object(c.jsx)(h.Provider,{value:{peer:a,peerConnection:u,setPeerConnection:j,peerconState:O,setPeerconState:g},children:n})}var v=t(12),O=(t(73),t(43)),g=t.n(O),x=t(57),m=t.n(x),y=t(46),w=t.n(y),k=t(117),C=t(114),S=t(56),N=t.n(S),E=t(115);function F(e){return new Promise((function(n,t){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){n(e)}),(function(e){t(e)})):n(function(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var t=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+t)}catch(c){console.error("Fallback: Oops, unable to copy",c)}document.body.removeChild(n)}(e))}))}function I(){var e=Object(o.useContext)(h),n=e.peer,t=e.peerConnection,i=e.peerconState,a=Object(o.useState)(0),r=Object(d.a)(a,2),s=r[0],l=r[1],j=Object(o.useState)("main"),f=Object(d.a)(j,2),b=f[0],p=f[1],O=Object(o.useState)(!1),g=Object(d.a)(O,2),x=g[0],m=g[1],y=Object(v.c)(0),w=Object(v.d)(y,[-100,0],["#161922","#0077ff"].reverse());return Object(o.useEffect)((function(){t&&i&&"connect"!==b&&p("connect")}),[t,i,b]),Object(c.jsxs)(v.b.div,{style:{background:i?w:""},className:"home",children:[Object(c.jsx)(v.a,{children:x&&s>0?Object(c.jsx)(W,Object(u.a)({},{pullState:s})):""}),Object(c.jsx)(v.b.header,{drag:"y",style:{y:y},onDragStart:i?function(){}:function(){m(!0),l(0)},onDragEnd:i?function(){}:function(){m(!1),function(e){switch(e){case 0:p("main");break;case 1:p("connect");break;case 2:n&&F(n.id),navigator.share&&n&&navigator.share({text:n.id});break;case 3:p("about")}}(s)},onDrag:i?function(){}:function(e,t){if(n){var c=-t.offset.y;c>250&&c<400?l(1):c>=400&&c<500?l(2):c>=500&&c<550?l(3):c<=250&&l(0)}},dragConstraints:{top:0,bottom:0},children:n?"main"===b?Object(c.jsx)(D,Object(u.a)({},{shade:x,pullState:s,peer:n})):"about"===b?Object(c.jsx)(T,{}):"connect"===b?Object(c.jsx)(P,{}):Object(c.jsx)(c.Fragment,{}):Object(c.jsx)(v.b.div,{className:"connecting-loader",initial:{opacity:0,height:0,y:0,background:"#0077ff"},animate:{opacity:1,height:"auto",background:"coral",y:0},exit:{opacity:0,height:0},children:Object(c.jsx)(v.b.p,{initial:{opacity:0},animate:{opacity:1},transition:{repeat:1/0,repeatType:"reverse",stiffness:.2,damping:.5},children:"Assigning ID..."})})})]})}function P(){var e=Object(o.useState)(""),n=Object(d.a)(e,2),t=n[0],i=n[1],a=Object(o.useContext)(h),r=a.peer,s=a.peerConnection,l=a.peerconState,u=a.setPeerConnection,j=Object(o.useState)(""),f=Object(d.a)(j,2),b=f[0],p=f[1];function O(e){console.log("connecting to:",e);var n=null===r||void 0===r?void 0:r.connect(e);console.log(n),u&&u(n);var t=setInterval((function(){var c,o,i,a,r;console.log(null===n||void 0===n||null===(c=n.peerConnection)||void 0===c?void 0:c.connectionState),(null===n||void 0===n||null===(o=n.peerConnection)||void 0===o?void 0:o.connectionState)&&"failed"===(null===n||void 0===n||null===(i=n.peerConnection)||void 0===i?void 0:i.connectionState)?(n.close(),u&&u(void 0),O(e),clearInterval(t)):(null===n||void 0===n||null===(a=n.peerConnection)||void 0===a?void 0:a.connectionState)&&"connected"===(null===n||void 0===n||null===(r=n.peerConnection)||void 0===r?void 0:r.connectionState)&&clearInterval(t)}),2e3)}return Object(o.useEffect)((function(){navigator.clipboard.readText().then((function(e){5===e.length&&i(e)})).catch((function(){}))}),[]),Object(o.useEffect)((function(){if(!s||!l){var e=setInterval((function(){t||navigator.clipboard.readText().then((function(e){return 5===e.length&&(i(e),!0)})).catch((function(){}))}),2e3);return function(){return clearInterval(e)}}}),[t,s,l]),Object(c.jsxs)(v.b.div,{initial:{opacity:0},animate:{opacity:1,height:l&&s?200:t?300:200,background:"#0077ff"},className:"connect-page",children:[Object(c.jsxs)("header",{children:[Object(c.jsx)("h2",{children:l&&s?"Connected to ".concat(s.peer):"Connect to ID"}),Object(c.jsx)(g.a,{})]}),l&&s?Object(c.jsx)(c.Fragment,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(k.a,{id:"partnerid",label:"partner id",defaultValue:"",InputProps:{style:{caretColor:"white",color:"white"}},autoFocus:!0,variant:"outlined",color:"secondary",onChange:function(e){p(e.target.value)}}),Object(c.jsx)(C.a,{disabled:!(5===b.length),variant:"text",color:"secondary",onClick:function(){return O(b)},children:"connect"})]}),t||l&&s?Object(c.jsx)("div",{className:"quick-connect",children:Object(c.jsxs)(E.a,{disabled:!(l||!s),onClick:function(){l&&s?s.close():O(t)},variant:"extended",style:l&&s?{background:"coral",color:"white"}:{},children:[l&&s?Object(c.jsx)(c.Fragment,{}):Object(c.jsx)(N.a,{}),Object(c.jsx)("p",{children:l||s?!l&&s?"connecting to ".concat(s.peer):"disconnect from ".concat(s&&s.peer):"connect to ".concat(t)})]})}):Object(c.jsx)(c.Fragment,{})]})}function T(){return Object(c.jsxs)(v.b.div,{initial:{opacity:0},animate:{opacity:1,height:120,background:"coral"},className:"about",children:[Object(c.jsxs)("header",{children:[Object(c.jsx)("h2",{children:"whats this?"}),Object(c.jsx)(w.a,{})]}),Object(c.jsx)("p",{children:"just a ux experiment and also u can use this to watch youtube with like one other person"})]})}function D(e){var n=e.shade,t=e.pullState,o=e.peer;return Object(c.jsxs)(v.b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:200},className:"peer-id",children:[Object(c.jsx)("div",{className:"pull-up-indicator",children:Object(c.jsx)(v.b.span,{initial:{y:5},animate:{y:-5},transition:{repeat:1/0,repeatType:"reverse",stiffness:.2,damping:.5},children:n||0!==t?"drag to select":"pull up"})}),Object(c.jsx)("h6",{children:"you are"}),Object(c.jsx)("p",{children:null===o||void 0===o?void 0:o.id})]})}function W(e){var n=e.pullState,t=Object(o.useContext)(h),i=t.peerConnection,a=t.peerconState;return Object(c.jsxs)(v.b.div,{initial:{opacity:0,y:100},exit:{opacity:0,y:200},animate:{opacity:1,y:0},className:"shade-menu",children:[Object(c.jsxs)("div",{style:{background:3===n?"var(--accent)":""},className:"menu-item",children:[Object(c.jsx)("p",{children:"what is this?"}),Object(c.jsx)(w.a,{})]}),Object(c.jsxs)("div",{style:{background:2===n?"var(--accent)":""},className:"menu-item",children:[Object(c.jsx)("p",{children:"share id"}),Object(c.jsx)(m.a,{})]}),i?Object(c.jsxs)("div",{style:{background:a?"var(--accent)":"coral"},className:"menu-item",children:[Object(c.jsx)("p",{children:a?"connected to ".concat(i.peer):"connecting to ".concat(i.peer)}),Object(c.jsx)(g.a,{})]}):Object(c.jsxs)("div",{style:{background:1===n?"var(--accent)":""},className:"menu-item",children:[Object(c.jsx)("p",{children:"connect with"}),Object(c.jsx)(g.a,{})]})]})}var L=function(){var e=Object(s.a)({palette:{primary:{main:"#0077ff"},secondary:{main:"#ffff"}}});return Object(c.jsx)(l.a,{theme:e,children:Object(c.jsx)(p,{children:Object(c.jsx)(I,{})})})},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var B=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,118)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),i(e),a(e)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/olive",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/olive","/service-worker.js");U?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):A(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):A(n,e)}))}}(),B()}},[[78,1,2]]]);
//# sourceMappingURL=main.163f7f14.chunk.js.map