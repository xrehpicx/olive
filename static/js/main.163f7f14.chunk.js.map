{"version":3,"sources":["../node_modules/peerjs/dist sync","components/PeerContext.tsx","components/utils.ts","components/Home.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","PeerContext","createContext","PeerContextProvider","children","useState","peer","setPeer","peerConnection","setPeerConnection","peerconState","setPeerconState","useEffect","console","log","open","on","off","close","undefined","err","p","Peer","nanoid","host","secure","type","window","location","reload","connection","conn","Provider","value","copyTextToClipboard","text","Promise","res","rej","navigator","clipboard","writeText","then","textArea","document","createElement","style","top","left","position","body","appendChild","focus","select","msg","execCommand","error","removeChild","fallbackCopyTextToClipboard","Home","useContext","pullState","setPullState","pullPage","setPullPage","shade","setShade","y","useMotionValue","background","useTransform","reverse","div","className","Shade","header","drag","onDragStart","onDragEnd","ps","share","runMenu","onDrag","i","offset","dragConstraints","bottom","PeerID","About","Connect","initial","opacity","height","animate","exit","transition","repeat","Infinity","repeatType","stiffness","damping","clip","setClip","otherid","setOtherid","connect","con","interval","setInterval","connectionState","clearInterval","readText","length","catch","TextField","label","defaultValue","InputProps","caretColor","color","autoFocus","variant","onChange","target","Button","disabled","onClick","Fab","span","App","theme","createMuiTheme","palette","primary","main","secondary","ThemeProvider","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.163f7f14.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 72;","import React, { createContext, useEffect, useState } from \"react\";\n\n// utils\nimport Peer from \"peerjs\";\nimport { nanoid } from \"nanoid\";\n\ninterface ContextProps {\n  peer: Peer;\n  peerConnection: Peer.DataConnection;\n  peerconState: boolean;\n  setPeerConnection: React.Dispatch<\n    React.SetStateAction<Peer.DataConnection | undefined>\n  >;\n  setPeerconState: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const PeerContext = createContext<Partial<ContextProps>>({});\n\nexport function PeerContextProvider({ children }: { children: any }) {\n  const [peer, setPeer] = useState<Peer>();\n\n  const [peerConnection, setPeerConnection] = useState<Peer.DataConnection>();\n  const [peerconState, setPeerconState] = useState(false);\n\n  useEffect(() => {\n    console.log(peerconState)\n  }, [peerconState])\n\n  useEffect(() => {\n    console.log('peer con set:', peerConnection, peerconState)\n    if (peerConnection && !peerconState) {\n\n      const open = () => {\n        console.log('connected');\n        setPeerconState(true);\n      }\n\n      peerConnection.on('open', open)\n      console.log('open event set')\n\n\n      return () => {\n        peerConnection.off('open', open)\n\n      }\n    }\n  }, [peerConnection, peerconState])\n\n  useEffect(() => {\n    if (peerConnection) {\n      const close = () => {\n        console.log('disconnected');\n        setPeerconState(false);\n        setPeerConnection(undefined);\n      }\n      const err = (err: any) => {\n        console.log('err', err);\n        setPeerconState(false);\n        setPeerConnection(undefined);\n\n      }\n      peerConnection.on('close', close)\n      peerConnection.on('error', err)\n\n      return () => {\n        peerConnection.off('close', close)\n        peerConnection.off('error', err)\n      }\n    }\n  }, [peerConnection])\n\n  useEffect(() => {\n    const p = new Peer(nanoid(5), {\n      host: \"ciapeer.herokuapp.com\",\n      secure: true,\n    });\n\n    const open = (id: string) => {\n      setPeer(p);\n      console.log(id);\n    }\n    const err = (err: any) => {\n      if (err.type === \"unavailable-id\") {\n        window.location.reload();\n      }\n    }\n    const connection = (conn: Peer.DataConnection) => {\n      console.log('getting connection from', conn.peer)\n      setPeerConnection(conn);\n    }\n    p.on(\"open\", open);\n\n    p.on(\"error\", err);\n    p.on(\"connection\", connection);\n\n    return () => {\n      p.off('open', open);\n      p.off('error', err);\n      p.off('connection', connection);\n    }\n\n  }, []);\n\n  return (\n    <PeerContext.Provider\n      value={{\n        peer,\n        peerConnection,\n        setPeerConnection,\n        peerconState,\n        setPeerconState,\n      }}\n    >\n      {children}\n    </PeerContext.Provider>\n  );\n}\n","export function fallbackCopyTextToClipboard(text: string) {\n  var textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n  textArea.style.position = \"fixed\";\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    var successful = document.execCommand(\"copy\");\n    var msg = successful ? \"successful\" : \"unsuccessful\";\n    console.log(\"Fallback: Copying text command was \" + msg);\n  } catch (err) {\n    console.error(\"Fallback: Oops, unable to copy\", err);\n  }\n\n  document.body.removeChild(textArea);\n}\nexport function copyTextToClipboard(text: string) {\n  return new Promise((res, rej) => {\n    if (!navigator.clipboard) {\n      res(fallbackCopyTextToClipboard(text));\n      return;\n    }\n    navigator.clipboard.writeText(text).then(\n      function () {\n        res(text);\n      },\n      function (err: any) {\n        rej(err);\n      }\n    );\n  });\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { PeerContext } from \"./PeerContext\";\nimport {\n  AnimatePresence,\n  motion,\n  useMotionValue,\n  useTransform,\n} from \"framer-motion\";\nimport \"./css/home.css\";\n\nimport SettingsEthernetOutlinedIcon from \"@material-ui/icons/SettingsEthernetOutlined\";\nimport ShareOutlinedIcon from \"@material-ui/icons/ShareOutlined\";\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\nimport Peer from \"peerjs\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport AssignmentOutlinedIcon from \"@material-ui/icons/AssignmentOutlined\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { copyTextToClipboard } from \"./utils\";\n\nexport default function Home() {\n  const { peer, peerConnection, peerconState } = useContext(PeerContext);\n\n  const [pullState, setPullState] = useState(0);\n  const [pullPage, setPullPage] = useState(\"main\");\n  const [shade, setShade] = useState(false);\n  const y = useMotionValue(0);\n  const background = useTransform(\n    y,\n    [-100, 0],\n    [\"#161922\", \"#0077ff\"].reverse()\n  );\n  function runMenu(ps: number) {\n    switch (ps) {\n      case 0:\n        setPullPage(\"main\");\n        break;\n      case 1:\n        setPullPage(\"connect\");\n        break;\n      case 2:\n        peer && copyTextToClipboard(peer.id);\n        if (navigator.share && peer) {\n          navigator.share({ text: peer.id });\n        }\n        break;\n      case 3:\n        // share\n        setPullPage(\"about\");\n        break;\n      default:\n      // do something\n    }\n  }\n\n  useEffect(() => {\n    if (peerConnection && peerconState) {\n      if (pullPage !== \"connect\") setPullPage(\"connect\");\n    }\n  }, [peerConnection, peerconState, pullPage]);\n\n  return (\n    <motion.div\n      style={{ background: peerconState ? background : \"\" }}\n      className=\"home\"\n    >\n      <AnimatePresence>\n        {shade && pullState > 0 ? <Shade {...{ pullState }} /> : \"\"}\n      </AnimatePresence>\n      <motion.header\n        drag=\"y\"\n        style={{ y }}\n        onDragStart={\n          !peerconState\n            ? () => {\n                setShade(true);\n                setPullState(0);\n              }\n            : () => {}\n        }\n        onDragEnd={\n          !peerconState\n            ? () => {\n                setShade(false);\n                runMenu(pullState);\n              }\n            : () => {}\n        }\n        onDrag={\n          !peerconState\n            ? (e, i) => {\n                if (peer) {\n                  const y = -i.offset.y;\n                  if (y > 250 && y < 400) {\n                    setPullState(1);\n                  } else if (y >= 400 && y < 500) {\n                    setPullState(2);\n                  } else if (y >= 500 && y < 550) {\n                    setPullState(3);\n                  } else if (y <= 250) {\n                    setPullState(0);\n                  }\n                }\n              }\n            : () => {}\n        }\n        dragConstraints={{ top: 0, bottom: 0 }}\n      >\n        {peer ? (\n          pullPage === \"main\" ? (\n            <PeerID\n              {...{\n                shade,\n                pullState,\n                peer,\n              }}\n            />\n          ) : pullPage === \"about\" ? (\n            <About />\n          ) : pullPage === \"connect\" ? (\n            <Connect />\n          ) : (\n            <></>\n          )\n        ) : (\n          <motion.div\n            className=\"connecting-loader\"\n            initial={{\n              opacity: 0,\n              height: 0,\n              y: 0,\n              background: \"#0077ff\",\n            }}\n            animate={{\n              opacity: 1,\n              height: \"auto\",\n              background: \"coral\",\n              y: 0,\n            }}\n            exit={{ opacity: 0, height: 0 }}\n          >\n            <motion.p\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{\n                repeat: Infinity,\n                repeatType: \"reverse\",\n                stiffness: 0.2,\n                damping: 0.5,\n              }}\n            >\n              Assigning ID...\n            </motion.p>\n          </motion.div>\n        )}\n      </motion.header>\n    </motion.div>\n  );\n}\n\nfunction Connect() {\n  const [clip, setClip] = useState(\"\");\n  const { peer, peerConnection, peerconState, setPeerConnection } = useContext(\n    PeerContext\n  );\n  const [otherid, setOtherid] = useState(\"\");\n\n  useEffect(() => {\n    navigator.clipboard\n      .readText()\n      .then((text) => {\n        if (text.length === 5) {\n          setClip(text);\n        }\n      })\n      .catch(() => {});\n  }, []);\n\n  useEffect(() => {\n    if (!(peerConnection && peerconState)) {\n      const interval = setInterval(() => {\n        if (!clip) {\n          navigator.clipboard\n            .readText()\n            .then((text) => {\n              if (text.length === 5) {\n                setClip(text);\n                return true;\n              }\n              return false;\n            })\n            .catch(() => {});\n        }\n      }, 2000);\n\n      return () => clearInterval(interval);\n    }\n  }, [clip, peerConnection, peerconState]);\n\n  function connect(id: string) {\n    console.log(\"connecting to:\", id);\n    const con = peer?.connect(id);\n    console.log(con);\n    setPeerConnection && setPeerConnection(con);\n    const interval = setInterval(() => {\n      console.log(con?.peerConnection?.connectionState);\n      if (\n        con?.peerConnection?.connectionState &&\n        con?.peerConnection?.connectionState === \"failed\"\n      ) {\n        con.close();\n        setPeerConnection && setPeerConnection(undefined);\n        connect(id);\n        clearInterval(interval);\n      } else if (\n        con?.peerConnection?.connectionState &&\n        con?.peerConnection?.connectionState === \"connected\"\n      ) {\n        clearInterval(interval);\n      }\n    }, 2000);\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{\n        opacity: 1,\n        height: !(peerconState && peerConnection) ? (clip ? 300 : 200) : 200,\n        background: \"#0077ff\",\n      }}\n      className=\"connect-page\"\n    >\n      <header>\n        <h2>\n          {!(peerconState && peerConnection)\n            ? \"Connect to ID\"\n            : `Connected to ${peerConnection.peer}`}\n        </h2>\n        <SettingsEthernetOutlinedIcon />\n      </header>\n      {!(peerconState && peerConnection) ? (\n        <>\n          <TextField\n            id=\"partnerid\"\n            label=\"partner id\"\n            defaultValue=\"\"\n            // fullWidth\n            InputProps={{ style: { caretColor: \"white\", color: \"white\" } }}\n            autoFocus\n            variant=\"outlined\"\n            color=\"secondary\"\n            onChange={(e) => {\n              setOtherid(e.target.value);\n            }}\n          />\n          <Button\n            disabled={!(otherid.length === 5)}\n            variant=\"text\"\n            color=\"secondary\"\n            onClick={() => connect(otherid)}\n          >\n            connect\n          </Button>\n        </>\n      ) : (\n        <></>\n      )}\n      {clip || (peerconState && peerConnection) ? (\n        <div className=\"quick-connect\">\n          <Fab\n            disabled={!!(!peerconState && peerConnection)}\n            onClick={() => {\n              if (peerconState && peerConnection) {\n                peerConnection.close();\n              } else {\n                connect(clip);\n              }\n            }}\n            variant=\"extended\"\n            style={\n              peerconState && peerConnection\n                ? { background: \"coral\", color: \"white\" }\n                : {}\n            }\n          >\n            {peerconState && peerConnection ? (\n              <></>\n            ) : (\n              <AssignmentOutlinedIcon />\n            )}\n            <p>\n              {!peerconState && !peerConnection\n                ? `connect to ${clip}`\n                : !peerconState && peerConnection\n                ? `connecting to ${peerConnection.peer}`\n                : `disconnect from ${peerConnection && peerConnection.peer}`}\n            </p>\n          </Fab>\n        </div>\n      ) : (\n        <></>\n      )}\n    </motion.div>\n  );\n}\nfunction About() {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{\n        opacity: 1,\n        height: 120,\n        background: \"coral\",\n      }}\n      className=\"about\"\n    >\n      <header>\n        <h2>whats this?</h2>\n        <HelpOutlineIcon />\n      </header>\n      <p>\n        just a ux experiment and also u can use this to watch youtube with like\n        one other person\n      </p>\n    </motion.div>\n  );\n}\n\nfunction PeerID({\n  shade,\n  pullState,\n  peer,\n}: {\n  shade: boolean;\n  pullState: number;\n  peer: Peer;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, height: 0 }}\n      animate={{\n        opacity: 1,\n        height: 200,\n      }}\n      className=\"peer-id\"\n    >\n      <div className=\"pull-up-indicator\">\n        <motion.span\n          initial={{ y: 5 }}\n          animate={{ y: -5 }}\n          transition={{\n            repeat: Infinity,\n            repeatType: \"reverse\",\n            stiffness: 0.2,\n            damping: 0.5,\n          }}\n        >\n          {!shade && pullState === 0 ? \"pull up\" : \"drag to select\"}\n        </motion.span>\n      </div>\n      <h6>you are</h6>\n      <p>{peer?.id}</p>\n    </motion.div>\n  );\n}\n\nfunction Shade({ pullState }: { pullState: number }) {\n  const { peerConnection, peerconState } = useContext(PeerContext);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 100 }}\n      exit={{ opacity: 0, y: 200 }}\n      animate={{\n        opacity: 1,\n        y: 0,\n      }}\n      className=\"shade-menu\"\n    >\n      <div\n        style={{ background: pullState === 3 ? \"var(--accent)\" : \"\" }}\n        className=\"menu-item\"\n      >\n        <p>what is this?</p>\n        <HelpOutlineIcon />\n      </div>\n      <div\n        style={{ background: pullState === 2 ? \"var(--accent)\" : \"\" }}\n        className=\"menu-item\"\n      >\n        <p>share id</p>\n        <ShareOutlinedIcon />\n      </div>\n      {!peerConnection ? (\n        <div\n          style={{ background: pullState === 1 ? \"var(--accent)\" : \"\" }}\n          className=\"menu-item\"\n        >\n          <p>connect with</p>\n          <SettingsEthernetOutlinedIcon />\n        </div>\n      ) : (\n        <div\n          style={{ background: peerconState ? \"var(--accent)\" : \"coral\" }}\n          className=\"menu-item\"\n        >\n          <p>\n            {peerconState\n              ? `connected to ${peerConnection.peer}`\n              : `connecting to ${peerConnection.peer}`}\n          </p>\n          <SettingsEthernetOutlinedIcon />\n        </div>\n      )}\n    </motion.div>\n  );\n}\n","import { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\nimport React from \"react\";\nimport Home from \"./components/Home\";\nimport { PeerContextProvider } from \"./components/PeerContext\";\n\nfunction App() {\n  const theme = createMuiTheme({\n    palette: {\n      primary: {\n        main: \"#0077ff\",\n      },\n      secondary: {\n        main: \"#ffff\",\n      },\n    },\n  });\n  return (\n    <ThemeProvider theme={theme}>\n      <PeerContextProvider>\n        <Home />\n      </PeerContextProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}